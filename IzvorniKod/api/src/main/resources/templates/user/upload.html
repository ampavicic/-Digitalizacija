<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Upload files</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/user/upload.css}">
</head>

<body>
<header>
    <div class="company-name"> <h2> COMPANY.co </h2> </div>
    <div class="navigation">
        <a href="/"> Homepage </a>
        <td>
            <a th:if="${loggedIn == false}" href="/login"> Login </a>
            <a th:if="${loggedIn == false}" href="/register"> Register </a>
            <a th:if="${loggedIn == true}" href="/user"> Userpage </a>
            <a th:if="${roleDirector == true}" href="/director"> Director </a>
            <a th:if="${roleReviser == true}" href="/reviser"> Reviser </a>
            <a th:if="${roleAccountant == true}" href="/accountant"> Accountant </a>
            <a th:if="${loggedIn == true}" href="/logout"> Logout </a>
        </td>
    </div>
</header>
<main>
    <div class="employeepage-container container">
        <h2 class="form-basic-heading">Upload photos</h2>
    </div>
    <br>
    <div id="employee-buttons">

        <div class="container">
            <form class="form-basic" method="post" action="/user/upload/submit" enctype="multipart/form-data">
                <label for="files" class="sr-only">Select files:</label>
                <input type="file" id="files" name="files" multiple required><br><br>
                <input name="_csrf" type="hidden" value="c8c67b2c-e4fc-4c74-b145-f223782c8a17">
                <button class="btn btn-lg btn-primary btn-block" type="submit">Start OCR test</button>
                <script>
                    const input = document.querySelector('#files');

                    // Listen for files selection
                    input.addEventListener('change', (e) => {
                        // Retrieve all files
                        const files = input.files;

                        // Check files count
                        if (files.length > 50) {
                            alert(`Only 50 files are allowed to be uploaded.`);
                            clearFileInput("files"); // Id
                            return;
                        }

                    });

                    function clearFileInput(id) {
                        var oldInput = document.getElementById(id);

                        var newInput = document.createElement("input");

                        newInput.type = "file";
                        newInput.id = oldInput.id;
                        newInput.name = oldInput.name;
                        newInput.className = oldInput.className;
                        newInput.multiple = true;
                        // TODO: copy any other relevant attributes

                        oldInput.parentNode.replaceChild(newInput, oldInput);

                    }

                </script>
            </form>

        </div>

    </div>
</main>
<footer>
    <div class="creator-name"> <h2> @zelenaLipa </h2> </div>
</footer>
</body></html>